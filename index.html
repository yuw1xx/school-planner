<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>School Planner</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Google+Sans+Flex:opsz,wdth,wght,ROND@6..144,25..150,100..1000,100&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="theme-violet">
    <main>
      <div id="view-home" class="screen active">
        <header
          style="
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <div>
            <h1 class="display-xl" id="greeting-text">Hello</h1>
            <div class="date-text" id="date-text">...</div>
          </div>
          <div
            class="icon-box"
            onclick="openSettings()"
            style="
              cursor: pointer;
              border-radius: 50%;
              background: var(--surface-up);
            "
          >
            <span class="material-symbols-rounded">palette</span>
          </div>
        </header>

        <div id="app-dock-container" class="app-dock"></div>

        <div class="label">HAPPENING NOW</div>
        <div id="dash-current-class"></div>
        <div class="label" style="margin-top: 32px">UP NEXT</div>
        <div id="dash-up-next"></div>
      </div>

      <div id="view-tasks" class="screen">
        <h2 class="headline" style="margin-bottom: 24px">Tasks</h2>
        <div class="chip-container">
          <div class="chip active" onclick="filterTasks('all', this)">All</div>
          <div class="chip" onclick="filterTasks('Homework', this)">
            Homework
          </div>
          <div class="chip" onclick="filterTasks('Exam', this)">Exams</div>
          <div class="chip" onclick="filterTasks('Project', this)">Project</div>
          <div class="chip" onclick="filterTasks('Personal', this)">
            Personal
          </div>
        </div>
        <div id="task-list"></div>
      </div>

      <div id="view-schedule" class="screen">
        <h2 class="headline" style="margin-bottom: 24px">Timetable</h2>
        <div class="chip-container">
          <div class="chip" onclick="renderSchedule(1, this)">Mon</div>
          <div class="chip" onclick="renderSchedule(2, this)">Tue</div>
          <div class="chip" onclick="renderSchedule(3, this)">Wed</div>
          <div class="chip" onclick="renderSchedule(4, this)">Thu</div>
          <div class="chip" onclick="renderSchedule(5, this)">Fri</div>
        </div>
        <div class="label" id="schedule-day-label">MONDAY</div>
        <div id="schedule-list"></div>
      </div>

      <div id="view-contacts" class="screen">
        <h2 class="headline" style="margin-bottom: 24px">Contacts</h2>
        <div
          class="input-box"
          style="
            display: flex;
            align-items: center;
            padding: 12px 18px;
            margin-bottom: 24px;
          "
        >
          <span
            class="material-symbols-rounded"
            style="opacity: 0.5; margin-right: 12px"
            >search</span
          >
          <input
            type="text"
            onkeyup="renderContacts(this.value)"
            placeholder="Search contacts..."
            style="
              background: transparent;
              border: none;
              color: white;
              width: 100%;
              outline: none;
              font-size: 16px;
            "
          />
        </div>
        <div id="contacts-list"></div>
      </div>

      <div id="view-focus" class="screen">
        <h2 class="headline" style="margin-bottom: 24px">Pomodoro</h2>
        <div class="focus-layout">
          <div style="position: relative; width: 300px; height: 300px">
            <svg
              width="300"
              height="300"
              viewBox="0 0 100 100"
              class="timer-svg"
            >
              <circle class="timer-bg" cx="50" cy="50" r="45"></circle>
              <circle
                class="timer-fg"
                id="timer-ring"
                cx="50"
                cy="50"
                r="45"
              ></circle>
            </svg>
            <div
              class="display-xl"
              id="timer-text"
              style="
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-weight: 400;
                font-variant-numeric: tabular-nums;
              "
            >
              25:00
            </div>
          </div>
          <div class="timer-actions">
            <button
              class="btn-big primary"
              id="timer-btn"
              onclick="toggleTimer()"
            >
              Start
            </button>
            <button class="btn-big secondary" onclick="resetTimer()">
              Reset
            </button>
          </div>
          <div style="width: 100%; max-width: 340px">
            <div class="label">Focus Length</div>
            <div class="chip-container" id="focus-opts">
              <div class="chip active" onclick="setTimer(25, this)">25m</div>
              <div class="chip" onclick="setTimer(45, this)">45m</div>
              <div class="chip" onclick="setTimer(60, this)">60m</div>
            </div>
            <div class="label">Break Length</div>
            <div class="chip-container" id="break-opts">
              <div class="chip" onclick="setTimer(5, this)">5m</div>
              <div class="chip" onclick="setTimer(15, this)">15m</div>
            </div>
          </div>
        </div>
      </div>

      <div id="view-grades" class="screen">
        <h2 class="headline" style="margin-bottom: 8px">Grades</h2>

        <div class="label" style="margin-bottom: 16px">Ranking System</div>
        <select
          class="input-box"
          id="grade-system-selector"
          onchange="changeGradeSystem(this.value)"
        >
          <option value="percent">Percentage (%)</option>
          <option value="gpa4">GPA (4.0 Scale)</option>
          <option value="gpa5">GPA (Weighted 5.0)</option>
          <option value="letter">Letter Grades (A-F)</option>
          <option value="uk">UK Classification</option>
        </select>

        <div
          class="card hero"
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px;
          "
        >
          <div>
            <div
              class="label"
              id="avg-label"
              style="color: var(--primary); opacity: 0.8"
            >
              Academic Standing
            </div>
            <div
              class="display-xl"
              id="gpa-display"
              style="color: var(--primary)"
            >
              0.00
            </div>
          </div>
          <span
            class="material-symbols-rounded"
            style="font-size: 48px; color: var(--primary)"
            >monitoring</span
          >
        </div>

        <div class="card" style="margin-top: 24px">
          <div class="label">Target Grade Calculator</div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px">
            <input
              type="number"
              class="input-box"
              id="calc-current"
              placeholder="Current %"
              style="margin-bottom: 8px"
            />
            <input
              type="number"
              class="input-box"
              id="calc-goal"
              placeholder="Goal %"
              style="margin-bottom: 8px"
            />
          </div>
          <input
            type="number"
            class="input-box"
            id="calc-weight"
            placeholder="Final Exam Weight %"
            style="margin-bottom: 12px"
          />
          <button
            class="btn-big primary"
            style="display: block; margin: 0 auto; padding: 12px 64px"
            onclick="calculateTargetGrade()"
          >
            Calculate
          </button>
          <div
            id="calc-result"
            class="body-text"
            style="
              margin-top: 12px;
              text-align: center;
              color: var(--primary);
              font-weight: 700;
            "
          ></div>
        </div>

        <div id="grades-list" style="margin-top: 24px"></div>
      </div>
    </main>

    <button class="fab" id="main-fab" onclick="openModal()">
      <span class="material-symbols-rounded">add</span>
    </button>

    <div class="nav-bar">
      <div class="nav-item active" onclick="nav('home', this)">
        <span class="material-symbols-rounded" style="font-size: 28px"
          >grid_view</span
        >
      </div>
      <div class="nav-item" onclick="nav('tasks', this)">
        <span class="material-symbols-rounded" style="font-size: 28px"
          >check_circle</span
        >
      </div>
      <div class="nav-item" onclick="nav('schedule', this)">
        <span class="material-symbols-rounded" style="font-size: 28px"
          >calendar_month</span
        >
      </div>
      <div class="nav-item" onclick="nav('contacts', this)">
        <span class="material-symbols-rounded" style="font-size: 28px"
          >group</span
        >
      </div>
      <div class="nav-item" onclick="nav('focus', this)">
        <span class="material-symbols-rounded" style="font-size: 28px"
          >timer</span
        >
      </div>
      <div class="nav-item" onclick="nav('grades', this)">
        <span class="material-symbols-rounded" style="font-size: 28px"
          >bar_chart</span
        >
      </div>
    </div>

    <div
      class="modal-overlay"
      id="addSheet"
      onclick="if (event.target === this) closeModal();"
    >
      <div class="modal-card">
        <h2 class="headline" style="margin-bottom: 20px">New Item</h2>
        <div class="segmented-control">
          <div class="seg-item active" id="cat-task" onclick="setCat('task')">
            Task
          </div>
          <div class="seg-item" id="cat-class" onclick="setCat('class')">
            Class
          </div>
          <div class="seg-item" id="cat-grade" onclick="setCat('grade')">
            Grade
          </div>
          <div class="seg-item" id="cat-contact" onclick="setCat('contact')">
            Contact
          </div>
        </div>
        <input type="hidden" id="add-category" value="task" />
        <input
          type="text"
          class="input-box"
          id="inp-title"
          placeholder="Title"
        />

        <div id="form-task">
          <div class="label">Assignment Type</div>
          <select class="input-box" id="inp-type">
            <option>Homework</option>
            <option>Exam</option>
            <option>Project</option>
            <option>Personal</option>
          </select>

          <div class="label">Due Date</div>
          <input type="date" class="input-box" id="inp-date" />
        </div>

        <div id="form-class" style="display: none">
          <div class="label">Room / Location</div>
          <input
            type="text"
            class="input-box"
            id="inp-loc"
            placeholder="Room / Location"
          />

          <div style="display: flex; gap: 10px">
            <div style="flex: 1">
              <div class="label">Day</div>
              <select class="input-box" id="inp-day">
                <option value="1">Mon</option>
                <option value="2">Tue</option>
                <option value="3">Wed</option>
                <option value="4">Thu</option>
                <option value="5">Fri</option>
              </select>
            </div>
            <div style="flex: 1">
              <div class="label">Time</div>
              <input type="time" class="input-box" id="inp-time" />
            </div>
          </div>
        </div>

        <div id="form-grade" style="display: none">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px">
            <div>
              <div class="label">Score (0-100)</div>
              <input
                type="number"
                class="input-box"
                id="inp-grade-val"
                placeholder="95"
              />
            </div>
            <div>
              <div class="label">Credits</div>
              <input
                type="number"
                class="input-box"
                id="inp-credits"
                value="3"
              />
            </div>
          </div>
          <div class="label">Course Weight</div>
          <select class="input-box" id="inp-weight">
            <option value="0">Standard</option>
            <option value="0.5">Honors (+0.5)</option>
            <option value="1.0">AP / IB (+1.0)</option>
          </select>
        </div>

        <div id="form-contact" style="display: none">
          <div class="label">Phone Number</div>
          <input
            type="tel"
            class="input-box"
            id="inp-phone"
            placeholder="+1 234..."
          />

          <div class="label">Email Address</div>
          <input
            type="email"
            class="input-box"
            id="inp-email"
            placeholder="name@example.com"
          />
        </div>

        <button
          class="btn-big primary"
          style="width: 100%; margin-top: 16px"
          onclick="saveItem()"
        >
          Save Item
        </button>
      </div>
    </div>

    <div
      class="modal-overlay"
      id="shortcutsSheet"
      onclick="if (event.target === this) closeShortcuts();"
    >
      <div class="modal-card">
        <h2 class="headline" style="margin-bottom: 16px">Shortcuts</h2>

        <div class="label">Add New Shortcut</div>
        <input
          type="text"
          class="input-box"
          id="sc-name"
          placeholder="Name (e.g. Canvas)"
        />
        <input
          type="text"
          class="input-box"
          id="sc-url"
          placeholder="URL (https://...)"
        />
        <div style="display: grid; grid-template-columns: 1fr 100px; gap: 12px">
          <input
            type="text"
            class="input-box"
            id="sc-icon"
            placeholder="Icon Name (e.g. school)"
          />
          <input
            type="color"
            class="input-box"
            id="sc-color"
            value="#a78bfa"
            style="height: 55px"
          />
        </div>
        <div
          class="body-text"
          style="font-size: 12px; margin-top: -8px; margin-bottom: 12px"
        >
          Use
          <u
            ><a href="https://fonts.google.com/icons" target="_blank"
              >Google Material Symbol</a
            ></u
          >
          names for icons (e.g. mail, calculator, youtube_activity).
        </div>

        <button
          class="btn-big primary"
          style="width: 100%; margin-bottom: 24px"
          onclick="addShortcut()"
        >
          Add Shortcut
        </button>

        <div class="label">Existing Shortcuts</div>
        <div id="sc-list"></div>
      </div>
    </div>

    <div
      class="modal-overlay"
      id="settingsSheet"
      onclick="if (event.target === this) closeSettings();"
    >
      <div class="modal-card">
        <h2 class="headline">Theme</h2>
        <div class="theme-grid">
          <div
            class="theme-ball"
            style="background: #a78bfa"
            onclick="setTheme('violet')"
          ></div>
          <div
            class="theme-ball"
            style="background: #34d399"
            onclick="setTheme('emerald')"
          ></div>
          <div
            class="theme-ball"
            style="background: #f472b6"
            onclick="setTheme('berry')"
          ></div>
          <div
            class="theme-ball"
            style="background: #60a5fa"
            onclick="setTheme('ocean')"
          ></div>
        </div>

        <h2 class="headline" style="margin-top: 24px">Data</h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px">
          <button
            class="btn-big secondary"
            onclick="exportData()"
            style="padding: 12px; font-size: 14px"
          >
            <span
              class="material-symbols-rounded"
              style="vertical-align: middle; margin-right: 4px"
              >download</span
            >
            Backup
          </button>
          <button
            class="btn-big secondary"
            onclick="importData()"
            style="padding: 12px; font-size: 14px"
          >
            <span
              class="material-symbols-rounded"
              style="vertical-align: middle; margin-right: 4px"
              >upload</span
            >
            Restore
          </button>
        </div>
      </div>
    </div>
    <script src="script.js" defer></script>
  </body>
</html>
